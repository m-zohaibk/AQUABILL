{
  "entities": {
    "Customer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer with their contact information.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the customer."
        },
        "name": {
          "type": "string",
          "description": "The name of the customer."
        },
        "contactDetails": {
          "type": "string",
          "description": "The contact details of the customer (e.g., phone number, email)."
        }
      },
      "required": [
        "id",
        "name",
        "contactDetails"
      ]
    },
    "Invoice": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Invoice",
      "type": "object",
      "description": "Represents an invoice for water supply.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the invoice."
        },
        "customerId": {
          "type": "string",
          "description": "Reference to Customer. (Relationship: Customer 1:N Invoice)"
        },
        "date": {
          "type": "string",
          "description": "The date of the invoice.",
          "format": "date-time"
        },
        "startTime": {
          "type": "string",
          "description": "The start time of water supply.",
          "format": "date-time"
        },
        "endTime": {
          "type": "string",
          "description": "The end time of water supply.",
          "format": "date-time"
        },
        "ratePerMinute": {
          "type": "number",
          "description": "The rate per minute for water supply."
        },
        "durationMinutes": {
          "type": "number",
          "description": "The duration of water supply in minutes."
        },
        "totalCost": {
          "type": "number",
          "description": "The total cost of water supply."
        },
        "amountReceived": {
          "type": "number",
          "description": "The amount received for the invoice."
        },
        "amountPending": {
          "type": "number",
          "description": "The amount pending for the invoice."
        }
      },
      "required": [
        "id",
        "customerId",
        "date",
        "startTime",
        "endTime",
        "ratePerMinute",
        "durationMinutes",
        "totalCost",
        "amountReceived",
        "amountPending"
      ]
    },
    "Setting": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Setting",
      "type": "object",
      "description": "Represents application settings.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the setting."
        },
        "ratePerMinute": {
          "type": "number",
          "description": "The default rate per minute for water supply."
        },
        "businessName": {
          "type": "string",
          "description": "The name of the business."
        },
        "contactInformation": {
          "type": "string",
          "description": "The contact information of the business."
        },
        "address": {
          "type": "string",
          "description": "The address of the business."
        }
      },
      "required": [
        "id",
        "ratePerMinute",
        "businessName",
        "contactInformation",
        "address"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}/customers/{customerId}",
        "definition": {
          "entityName": "Customer",
          "schema": {
            "$ref": "#/backend/entities/Customer"
          },
          "description": "Stores customer data specific to each user. Path-based ownership ensures that only the user can access their customer data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "customerId",
              "description": "The unique identifier for the customer."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/invoices/{invoiceId}",
        "definition": {
          "entityName": "Invoice",
          "schema": {
            "$ref": "#/backend/entities/Invoice"
          },
          "description": "Stores invoice data specific to each user. Path-based ownership ensures that only the user can access their invoice data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "invoiceId",
              "description": "The unique identifier for the invoice."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/settings/{settingId}",
        "definition": {
          "entityName": "Setting",
          "schema": {
            "$ref": "#/backend/entities/Setting"
          },
          "description": "Stores settings data specific to each user. Path-based ownership ensures that only the user can access their settings data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "settingId",
              "description": "The unique identifier for the setting."
            }
          ]
        }
      }
    ],
    "reasoning": "Given the requirement for a single user to manage all data without complex role-based access control, the data structure is designed to be simple and straightforward, focusing on path-based ownership under the user's UID. This approach ensures that all data is private to the user and simplifies security rules.  Since all data is private to the user, no denormalization of authorization data is required. QAPs are supported as there is no list operation restrictions."
  }
}